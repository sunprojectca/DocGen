# Rust Project Template for DocGen
# Rename to Cargo.toml to use

[package]
name = "docgen"
version = "0.1.0"
edition = "2021"
rust-version = "1.75"
authors = ["Your Name <your.email@example.com>"]
description = "AI-Powered Universal Code Documentation Generator"
repository = "https://github.com/sunprojectca/DocGen"
homepage = "https://github.com/sunprojectca/DocGen"
documentation = "https://github.com/sunprojectca/DocGen#readme"
readme = "README.md"
license = "MIT"
keywords = ["documentation", "ai", "code-analysis", "cli"]
categories = ["command-line-utilities", "development-tools"]

[dependencies]
# AI/LLM Integration
async-openai = "0.25"          # OpenAI API client
# anthropic-sdk = "0.2"        # Uncomment for Anthropic/Claude support

# Code Parsing
tree-sitter = "0.24"           # Universal parser
tree-sitter-rust = "0.23"      # Rust grammar (add more as needed)
syntect = "5.2"                # Syntax highlighting

# CLI Framework
clap = { version = "4.5", features = ["derive", "cargo", "env"] }
console = "0.15"               # Terminal utilities
indicatif = "0.17"             # Progress bars

# Serialization & Config
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
toml = "0.8"

# Async Runtime
tokio = { version = "1.41", features = ["full"] }
futures = "0.3"

# Error Handling
anyhow = "1.0"                 # Flexible error handling
thiserror = "2.0"              # Custom error types

# File System
walkdir = "2.5"                # Directory traversal
globset = "0.4"                # Glob pattern matching
ignore = "0.4"                 # .gitignore support

# Logging
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# Utilities
once_cell = "1.20"             # Lazy static
regex = "1.11"

[dev-dependencies]
criterion = "0.5"              # Benchmarking
tempfile = "3.14"              # Temporary files for tests
pretty_assertions = "1.4"      # Better test assertion output
mockito = "1.5"                # HTTP mocking
tokio-test = "0.4"

[[bin]]
name = "docgen"
path = "src/main.rs"

[profile.release]
opt-level = 3                  # Maximum optimization
lto = true                     # Link-time optimization
codegen-units = 1              # Single codegen unit (slower build, faster binary)
strip = true                   # Strip symbols
panic = "abort"                # Don't unwind on panic

[profile.dev]
opt-level = 0                  # No optimization in dev
debug = true

[profile.test]
opt-level = 1                  # Some optimization for tests

# ============================================
# Feature Flags
# ============================================

[features]
default = ["openai"]
openai = ["async-openai"]
# anthropic = ["anthropic-sdk"]
all-languages = [              # Support for all tree-sitter grammars
    "tree-sitter-python",
    "tree-sitter-javascript",
    "tree-sitter-typescript",
    "tree-sitter-rust",
    "tree-sitter-go",
    "tree-sitter-java",
]

# ============================================
# Build Configuration
# ============================================

[package.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]

# ============================================
# Workspace Configuration (for future multi-crate setup)
# ============================================

# [workspace]
# members = ["crates/*"]
# resolver = "2"
